{"version":3,"sources":["webpack:///./api_auth.js","webpack:///src/components/Korero.vue","webpack:///./src/lib/streaming_recorder.js","webpack:///./src/lib/resampler.js","webpack:///./src/lib/vad.js","webpack:///./src/lib/visualise.js","webpack:///./src/components/Korero.vue?ba1d","webpack:///./src/components/Korero.vue","webpack:///./src/main.js"],"names":["api_auth","headers","Authorization","url","exports","__webpack_require__","Korero","name","data","vadOn","recordingOn","recorder","buttonText","transcriptions","icon","loadRecording","te_reo_sensivity","vad_sensitivity","sensitivity_max","status","totalCount","methods","deleteObject","e","this","splice","stopRecording","stop","isMobile","test","navigator","userAgent","console","log","setTeReoSensitivity","target","value","sendTeReoSensitivity","sensitivity_sock","readyState","threshold","parseInt","send","setVadSensivity","processResult","text","current","total_count","active_count","animateCount","display_count","active","setTimeout","initWebSocket","socket_url","socket","WebSocket","binaryType","self","onmessage","message","isTrusted","onclose","onerror","err","ensureWebSocket","CLOSED","CLOSING","initSensitivitySocket","onopen","mounted","startVAD","onclick","event","unshift","constructor","options","beforeRecording","pauseRecording","processAudio","afterRecording","micFailed","voiceStop","voiceStart","visCanvasID","canvasID","bitRate","sampleRate","bufferSize","records","sampler","fromSampleRate","toSampleRate","channels","outputBufferSize","noReturn","initialize","Error","resampler","bypassResampler","ratioWeight","compileInterpolationFunction","interpolate","tailExists","lastWeight","initializeBuffers","toCompile","channel","Function","buffer","outputBuffer","length","bufferSlice","sliceAmount","subarray","error","slice","generateTailCache","Float32Array","lastOutput","isPause","isRecording","volume","vad","vis","activity","context","window","AudioContext","webkitAudioContext","close","start","mediaDevices","getUserMedia","video","audio","channelCount","echoCancellation","then","_micCaptured","bind","catch","_micError","processor","disconnect","pause","stream","getTracks","forEach","track","input","recordList","lastRecord","_floatTo16BitPCM","output","i","s","Math","max","min","_convertTo16BitPCM","arrayBuffer","out","Int16Array","createMediaStreamSource","createScriptProcessor","_voiceStop","_voiceStart","debug","source","voice_stop","voice_start","option","fftSize","bufferLen","smoothingTimeConstant","energy_offset","energy_threshold_ratio_pos","energy_threshold_ratio_neg","energy_integration","filter","f","v","hasOwnProperty","hertzPerBin","iterationFrequency","iterationPeriod","setFilter","shape","iLen","j","jLen","ready","vadState","energy_threshold_pos","energy_threshold_neg","voiceTrend","voiceTrendMax","voiceTrendMin","voiceTrendStart","voiceTrendEnd","damper","analyser","createAnalyser","floatFrequencyData","frequencyBinCount","floatFrequencyDataLinear","connect","scriptProcessorNode","destination","onaudioprocess","getFloatFrequencyData","update","monitor","logging","log_i","log_limit","triggerLog","limit","msg","fft","pow","getEnergy","energy","signal","end","integration","canvas_id","sourceNode","audioContext","canvas","document","getElementById","canvasContext","getContext","loop","bufferLength","dataArray","Uint8Array","clearFrame","width","clientWidth","height","clientHeight","WIDTH","HEIGHT","renderFrame","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","barWidth","barHeight","x","l","clearRect","ev","sample","inputBuffer","getChannelData","sum","sqrt","toFixed","resampled","streamer","components_Korero","render","_vm","_h","$createElement","_c","_self","staticClass","_v","class","on","loading","attrs","id","mobile","_e","type","domProps","$event","_s","_l","item","index","click","staticRenderFns","src_components_Korero","normalizeComponent","ssrContext","Vue","use","vueCustomElement","customElement"],"mappings":"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","file":"static/js/app.9e7f.js","sourcesContent":["api_auth = {\n  headers:{\n    Authorization: \"Token YOUR_TOKEN_HERE\",\n  },\n  url: 'https://koreromaori.io/api/transcription/?method=stream'\n}\n\nexports.api_auth = api_auth\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./api_auth.js\n// module id = BLBT\n// module chunks = 1","<template>\n  <div class=\"Korero\">\n    <div class=\"header\">\n      <h4>Kōrero Māori Word Count (Demo))</h4>\n      <button id=\"startVAD\" v-bind:class=\"{ vad: vadOn, on: recordingOn, 'loading': loadRecording}\">\n        <i class=\"fa fa-microphone\" ></i>\n        <i class=\"fa fa-stop\" ></i>\n        <i class=\"fa fa-spinner fa-spin\"></i>\n      </button>\n      <div id=\"vadStatus\" v-bind:class=\"{ active: vadOn, 'mobile': isMobile()}\">\n        <div>\n          <canvas id=\"canvas\" v-if=\"!isMobile()\"></canvas>\n          <span v-if=\"isMobile() && vadOn && recordingOn\">Voice Detected</span>\n          <span v-if=\"isMobile() && recordingOn && !vadOn\">Listening</span>\n          <span v-if=\"isMobile()\">Hit Record</span>\n        </div>\n      </div>\n   \n\n    <div id=\"te_reo_sensivity\"  class=\"sensitivity_box\">\n        Sensitivity:\n        <input\n          type=\"range\"\n          min=\"0\"\n          v-bind:max=\"sensitivity_max\"\n          v-bind:value=\"te_reo_sensivity\"\n          v-on:input=\"setTeReoSensitivity($event)\">\n          {{ te_reo_sensivity }}\n      </div>\n<!--       <div id=\"vad_sensitivity\" class=\"sensitivity_box\">\n        Voice Activity Sensitivity:\n        <input\n          type=\"range\"\n          min=\"0\"\n          v-bind:max=\"sensitivity_max\"\n          v-bind:value=\"vad_sensitivity\"\n          v-on:input=\"setVadSensivity($event)\">\n          {{ vad_sensitivity }}\n      </div> -->\n  </div>\n\n    <div class=\"body\">\n      <div id=\"transcriptions\">\n        <div v-for=\"(item, index) in transcriptions\" class='transcription' v-bind:class=\"[item.status]\" v-if=\"item.status != 'Failed'\"> \n          <button class=\"delete\" v-if=\"item.status != 'Transcribing'\" v-on:click=\"deleteObject(index)\"><i class=\"fa fa-times\"></i></button>\n          <div class='text'>\n            <i class=\"fa fa-spinner fa-spin\" v-bind:class=\"[item.status]\" v-if=\"item.status == 'Transcribing'\" ></i>\n          \n            <div v-if=\"item.status != 'Transcribing'\">{{item.display_count}}</div>\n        \n          </div>\n        </div>\n      </div>\n      \n    </div>\n\n    <div class=\"footer\">\n      <div class='status'> {{status}}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport recorder from '../lib/streaming_recorder.js';\nconst ApiAuth = require('../../api_auth');\nconst api_auth = ApiAuth.api_auth;\n// import 'ws-audio-api';\n// const streamer = WSAudioAPI.Streamer();\n//const axios = require('axios');\nexport default {\n  name: 'Kōrero',\n  data () {\n    return {\n\n      vadOn: false,\n      recordingOn: false,\n      recorder: null,\n      buttonText: 'Start',\n      transcriptions: [],\n      icon: 'fa-microphone',\n      loadRecording: false,\n      te_reo_sensivity: 15,\n      vad_sensitivity: 10,\n      sensitivity_max: 100,\n      status: '',\n      totalCount : 0\n    }\n  },\n  methods: {\n    deleteObject: function (e) {\n      this.transcriptions.splice(e, 1)\n    },\n    stopRecording: function () {\n      try{this.recorder.stop();}\n      catch(e){}\n      this.recorder=null;\n      this.vadOn = false;\n      this.recordingOn = false\n    },   \n    isMobile() {\n      if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|SamsungBrowser|Opera Mini/i.test(navigator.userAgent)) {\n        console.log(navigator.userAgent)\n        return true\n      } else {\n        return false\n      }\n    },\n    setTeReoSensitivity: function(e) {\n      this.te_reo_sensivity=e.target.value;\n      this.sendTeReoSensitivity();\n    },\n    sendTeReoSensitivity: function() {\n      if (this.sensitivity_sock.readyState == 1)  {\n        var tmp = parseInt(this.te_reo_sensivity)\n        var threshold = \"\" + (1 - tmp / this.sensitivity_max);\n        // if the server received 'Text' that can be \n        // interpreted as a float, it assumes its sensititvy \n        console.log(\"Setting sensitivity threshold to \" + threshold)\n        this.sensitivity_sock.send(threshold);\n      }\n    },\n    setVadSensivity: function(e) {\n      this.vad_sensitivity=e.target.value;\n    },\n    processResult: function(text) {\n      var current = this.transcriptions[0];\n      if (current) {\n        if (text=='EOS') {\n          current.total_count = current.total_count + current.active_count;\n          current.active_count = 0;\n        }\n        else {  \n          current.active_count = parseInt(text);\n          current.status = 'Success';\n        }\n\n        this.animateCount();\n      }\n    },\n    animateCount: function() {\n      var current = this.transcriptions[0];\n      if (current) {\n          if (current.display_count == current.total_count) {\n            current.active=false;\n            return;\n          }\n\n          if (current.display_count < current.total_count) {\n            current.display_count += 1;\n            current.active=true;\n          }\n\n          if (current.display_count > current.display_count) {\n            current.display_count -= 1;\n            current.active=true;\n          }\n\n          setTimeout(this.animateCount, 150);\n      }\n    },\n\n    initWebSocket: function() {\n\n        var socket_url = process.env.ASR_WEBSOCKET_ENDPOINT + \"/word_count\";\n        this.status = \"Connecting to \" + socket_url;\n        this.socket = new WebSocket(socket_url);\n        this.socket.binaryType = 'arraybuffer';\n        var self = this;\n        this.socket.onmessage = function(message) {\n          //console.log(message);\n          self.status = \"Connected to  \" + socket_url;\n          if (message.isTrusted) {\n              self.processResult(message.data);\n          }\n        };\n        this.socket.onclose = function () {\n          self.status = \"Last connected \" + socket_url;\n          console.log('Connection to server closed');\n        };\n        this.socket.onerror = function (err) {\n           self.status = \"Error getting data \" + err;\n           console.log('Getting audio data error:', err);\n        };\n    },\n\n    ensureWebSocket: function() {\n      self = this;\n      if (this.socket == null) {\n        this.initWebSocket();\n      }\n      else {\n        var readyState = this.socket.readyState;\n\n        if (readyState == WebSocket.CLOSED) {\n          this.initWebSocket();\n        }\n\n        if (readyState == WebSocket.CLOSING) {\n          this.socket.onclose = function () {\n            self.initWebSocket();\n          }\n        } \n        // otherwise, if WebSocket.CONNECTING || WebSocket.OPEN \n        // just let nature take its course\n      }\n    },\n\n    initSensitivitySocket: function() {\n\n        var socket_url = process.env.ASR_WEBSOCKET_ENDPOINT + \"/word_count_sensitivity\"\n        console.log( \"Connecting to \" + socket_url);\n        this.sensitivity_sock = new WebSocket(socket_url);\n        this.sensitivity_sock.binaryType = 'arraybuffer';\n        var sendTeReoSensitivity = this.sendTeReoSensitivity;\n        this.sensitivity_sock.onopen = function(message) {\n          console.log(\"Connected to  \" + socket_url);\n          sendTeReoSensitivity();\n        };\n    }\n\n  },\n  mounted: function () {\n\n    this.initSensitivitySocket();\n    startVAD.onclick = event => {\n      if (this.recorder==null) {\n        this.loadRecording = true;\n        var transcription = { \n          status: 'Transcribing',\n          display_count: 0, \n          total_count: 0,\n          active_count: 0\n        }\n        this.transcriptions.unshift(transcription)\n\n        this.initWebSocket();\n\n        this.recorder = new recorder({\n         \n          processAudio: (buffer) => {\n            if (this.socket.readyState == 1)  {\n              this.socket.send(buffer);\n            }\n          },\n\n          afterRecording: (stream) => {\n            if (this.socket.readyState == 1)  {\n              this.socket.send('EOS');\n            }\n          },\n\n          pauseRecording: () => {\n            streamer.stop();\n            console.log('paused')\n          },\n\n          micFailed: () => {\n            console.log('failed')\n          },\n          \n          voiceStop: () => {\n            this.vadOn = false\n          },\n\n          voiceStart: () => {\n            this.vadOn = true\n            this.ensureWebSocket()\n          },\n\n          canvasID: this.isMobile() ? null : 'canvas',\n          bitRate         : 64,\n          sampleRate      : 44100,\n          // format          : this.format\n        })\n      }\n\n      if (this.recordingOn) {\n        this.recorder.stop();\n        this.recorder=null;\n        this.vadOn = false;\n        this.recordingOn = false\n        // this.buttonText = 'Start'\n      } else {\n        this.recorder.start()\n        this.recordingOn = true\n        this.buttonText = 'Stop'\n        this.loadRecording = false\n      }\n\n    }\n  }\n}\n\n\n</script>\n\n<style scoped>\n\n.Korero {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  font-size: 14px;\n}\nbutton.delete{\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  display: block;\n  border: 0px;\n  margin: 2px;\n  font-size: 0.7em;\n  color: #696969;\n  cursor: pointer;\n  outline: none;\n  background: none;\n}\n.transcription{\n  position: relative;\n  width: 100%;\n  margin: 20px 30px 20px 30px;\n  max-width: 500px;\n  /*margin-top: 20px; */\n  font-size: 1.5em;\n  border-radius: 8px;\n  /*box-shadow: 0px 2px 6px -2px rgba(0,0,0,1)  */\n  border: 1px solid black;\n}\n.transcription.Transcribing{\n  border: 0px;\n}\n.transcription .text {\n  padding: 15px 20px;\n  font-size: 4em;\n}\n.transcription:nth-of-type(1){\n  margin-top: 40px;\n}\n\n.transcription .active {\n  color: lightcoral;\n}\n\ndiv.transcription.Success div.text [class*=fa]{\n  display: none;\n}\n.Korero, .header, .body{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.body{\n  height: 100vh;\n  margin-top: -225px;\n}\n.header{\n  padding-bottom: 15px;\n  z-index: 1;\n  background-color: white;\n  padding-left: 15px;\n  padding-right: 15px;  \n}\n.footer .status {\n  margin-top: -15px;\n  margin-bottom: 15px;\n  font-style: italic;\n}\n\n#transcriptions{\n  z-index: 0;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n  flex-wrap: nowrap;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar; \n  align-items: center;  \n  margin-top: 232px;\n  height: 100vh;    \n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n#vadStatus{\n  display: flex;\n  width: 100%;\n  max-width: 500px;  \n  height: 100px;\n  align-self: center;\n  align-items: center;\n}\n#vadStatus canvas{\n  z-index: 1;\n  display: block;\n  height: 100%;\n  width: 100%;\n  background-color: #333;\n}\n#vadStatus div{\n  height: 100%;\n  width: 100%;\n  border: 4px solid black;\n  border-radius: 4px;\n}\n#vadStatus.active div{\n  border-color: red;\n}\n#vadStatus.mobile{\n  height: 28px;\n  max-width: 150px;  \n}\n#vadStatus.mobile div span{\n  display: block;\n  padding: 4px;\n}\n#vadStatus.mobile div{\n  color: white;\n  font-weight: 700;\n  background-color: black;\n}\n#vadStatus.mobile.active div{\n  background-color: red;\n}\n#startVAD {\n  z-index: 2;\n  align-self: center;\n  margin: 15px;\n  outline: none;\n  background-color: rgb(40,40,40);\n  color: white;\n  width: 80px;\n  height: 80px;\n  border: 2px solid black;\n  border-radius: 40px;\n  padding: 8px 16px;\n  cursor: pointer;\n}\n#startVAD [class*=fa]{\n  font-size: 34px !important;\n}\n#startVAD.on {\n  background-color: rgba(255, 40, 40, 0.75);\n  border-color: rgb(200, 40, 40);\n}\n#startVAD.on.vad {\n  background-color: rgba(255, 40, 40, 1);\n}\n#startVAD.on .fa-microphone{\n  display: none;\n}\n#startVAD .fa-stop, #startVAD .fa-spinner{\n  display: none;\n}\n#startVAD.on .fa-stop{\n  display: initial;\n}\n#startVAD.on.loading .fa-spinner{\n  display: initial;\n}\naudio{\n  outline: none;\n  width: 100%;\n  padding-bottom: 15px;\n}\n.audio{\n  padding: 0px 15px 0px 15px;\n}\ndiv.sensitivity_box {\n  padding: 5px;\n  margin: 5px 0 10px 0;\n  align-self: center;\n  text-align: right;\n}\ndiv.sensitivity_box input {\n  width: 200px;\n}\n\ndiv.confidence{\n  display: inline-flex;\n  flex-wrap: wrap;\n}\ndiv.char{\n  /*line-height: 20px;*/\n}\ndiv.char-wrapper{\n  width: 20px;\n  display: inline-block;\n  text-align: center;\n}\ndiv.word{\n  margin-right: 20px;\n}\ndiv.word:last-child{\n  margin-right: 0px;\n}\ndiv.word-wrapper{\n  /*width: 20px*/\n}\nspan.char{\n  display: inline-block;\n  width: 20px;\n  text-align: center;\n}\nspan.prob{\n  display: inline-block;\n  font-size: 8px;\n  /*line-he*/ight: 0px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Korero.vue","import Resampler from './resampler'\nimport VAD from './vad.js'\nimport vis from './visualise'\n\nexport default class {\n  constructor (options = {}) {\n    this.beforeRecording   = options.beforeRecording\n    this.pauseRecording    = options.pauseRecording\n    this.processAudio      = options.processAudio\n    this.afterRecording    = options.afterRecording\n    this.micFailed         = options.micFailed\n    this.voiceStop         = options.voiceStop\n    this.voiceStart        = options.voiceStart\n    this.visCanvasID       = options.canvasID || null\n\n    this.bitRate = options.bitRate || 96\n    this.sampleRate = options.sampleRate || 16000\n    this.bufferSize = 4096\n    this.records    = []\n\n    this.sampler = new Resampler(this.sampleRate, 16000, 1, this.bufferSize)\n\n    this.isPause     = false\n    this.isRecording = false\n\n    this.volume   = 0\n\n    this.vad = null\n    this.vis = null\n    this.activity = false\n\n    this.vis = null\n\n    // Set Sample Rate according to device and browser campability\n    this.context = new(window.AudioContext || window.webkitAudioContext)()\n    this.sampleRate = this.context.sampleRate\n    this.context.close()\n  }\n\n\n  start () {\n    const constraints = {\n      video: false,\n      audio: {\n        channelCount: 1,\n        echoCancellation: true\n      }\n    }\n\n    this.beforeRecording && this.beforeRecording('start recording')\n\n    navigator.mediaDevices\n             .getUserMedia(constraints)\n             .then(this._micCaptured.bind(this))\n             .catch(this._micError.bind(this))\n    this.isPause = false\n    this.isRecording = true\n\n  }\n\n  stop () {\n    if (this.vis){\n      this.vis.stop()\n    }\n\n    // this.stream.getTracks().forEach((track) => track.stop())\n    // this.input.disconnect()\n    if (this.processor)\n      this.processor.disconnect()\n    if (this.context)\n      this.context.close()\n\n    this.isPause     = false\n    this.isRecording = false\n\n    \n  }\n\n  pause () {\n    this.stream.getTracks().forEach((track) => track.stop())\n    this.input.disconnect()\n    this.processor.disconnect()\n    this.context.close()\n\n    this.isPause = true\n\n    this.pauseRecording && this.pauseRecording('pause recording')\n  }\n\n  recordList () {\n    return this.records\n  }\n\n  lastRecord () {\n    return this.records.slice(-1)\n  }\n\n  _floatTo16BitPCM(input, output) {\n    for (let i = 0; i < input.length; i++) {\n      const s = Math.max(-1, Math.min(1, input[i]))\n      output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF)\n    }\n  }\n\n  _convertTo16BitPCM(arrayBuffer) {\n    const data = new Float32Array(arrayBuffer)\n    const out = new Int16Array(arrayBuffer.length)\n    this._floatTo16BitPCM(data, out)\n    return out\n  }\n\n  _micCaptured (stream) {\n    this.context    = new(window.AudioContext || window.webkitAudioContext)({sampleRate: this.sampleRate})\n    this.input      = this.context.createMediaStreamSource(stream)\n    this.processor  = this.context.createScriptProcessor(this.bufferSize, 1, 1)\n    this.stream     = stream\n\n    this._voiceStop = () => {\n      this.voiceStop()\n      this.activity = false\n      if (this.afterRecording) {\n          this.afterRecording();\n      }\n    }\n    this._voiceStart = () => {\n      this.voiceStart()\n      this.activity = true\n    }\n\n    // Create VAD\n    var options = {\n      debug: false,\n      source: this.input,\n      voice_stop: this._voiceStop,\n      voice_start: this._voiceStart,\n    };         \n    this.vad = new VAD(options)\n    //this.vad.triggerLog()\n    \n    // create visualisation\n    if (this.visCanvasID){\n      try{\n        this.vis = new vis(this.visCanvasID, this.input, this.input.context)\n        this.vis.start()\n      } catch(error){\n        console.log(error)\n      }\n    }\n\n    this.processor.onaudioprocess = (ev) => {\n      var sample = ev.inputBuffer.getChannelData(0);\n\n      //work out volume\n      let sum = 0.0\n      for (let i = 0; i < sample.length; ++i) {\n        sum += sample[i] * sample[i]\n      }\n      this.volume = Math.sqrt(sum / sample.length).toFixed(2)\n\n      // streaming callback to processAudio \n      // - if we're in voice detection and the callback is defined\n      if (this.activity) {\n        if (this.processAudio) {\n            var resampled = this.sampler.resampler(sample);\n            var buffer = this._convertTo16BitPCM(resampled)\n            this.processAudio(buffer);\n        }\n      }\n    }\n\n    this.input.connect(this.processor)\n    this.processor.connect(this.context.destination)\n  }\n\n  _micError (error) {\n    this.micFailed && this.micFailed(error)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/streaming_recorder.js","//JavaScript Audio Resampler (c) 2011 - Grant Galitz\nexport default class {\n\n    constructor(fromSampleRate, toSampleRate, channels, outputBufferSize, noReturn) {\n        this.fromSampleRate = fromSampleRate;\n        this.toSampleRate = toSampleRate;\n        this.channels = channels | 0;\n        this.outputBufferSize = outputBufferSize;\n        this.noReturn = !!noReturn;\n        this.initialize();\n    }\n\n    initialize() {\n        //Perform some checks:\n        if (this.fromSampleRate > 0 && this.toSampleRate > 0 && this.channels > 0) {\n            if (this.fromSampleRate == this.toSampleRate) {\n                //Setup a resampler bypass:\n                this.resampler = this.bypassResampler;      //Resampler just returns what was passed through.\n                this.ratioWeight = 1;\n            }\n            else {\n                //Setup the interpolation resampler:\n                this.compileInterpolationFunction();\n                this.resampler = this.interpolate;          //Resampler is a custom quality interpolation algorithm.\n                this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n                this.tailExists = false;\n                this.lastWeight = 0;\n                this.initializeBuffers();\n            }\n        }\n        else {\n            throw(new Error(\"Invalid settings specified for the resampler.\"));\n        }\n    }\n\n    compileInterpolationFunction() {\n        var toCompile = \"var bufferLength = Math.min(buffer.length, this.outputBufferSize);\\\n        if ((bufferLength % \" + this.channels + \") == 0) {\\\n            if (bufferLength > 0) {\\\n                var ratioWeight = this.ratioWeight;\\\n                var weight = 0;\";\n        for (var channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"var output\" + channel + \" = 0;\"\n        }\n        toCompile += \"var actualPosition = 0;\\\n                var amountToNext = 0;\\\n                var alreadyProcessedTail = !this.tailExists;\\\n                this.tailExists = false;\\\n                var outputBuffer = this.outputBuffer;\\\n                var outputOffset = 0;\\\n                var currentPosition = 0;\\\n                do {\\\n                    if (alreadyProcessedTail) {\\\n                        weight = ratioWeight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" = 0;\"\n        }\n        toCompile += \"}\\\n                    else {\\\n                        weight = this.lastWeight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" = this.lastOutput[\" + channel + \"];\"\n        }\n        toCompile += \"alreadyProcessedTail = true;\\\n                    }\\\n                    while (weight > 0 && actualPosition < bufferLength) {\\\n                        amountToNext = 1 + actualPosition - currentPosition;\\\n                        if (weight >= amountToNext) {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" += buffer[actualPosition++] * amountToNext;\"\n        }\n        toCompile += \"currentPosition = actualPosition;\\\n                            weight -= amountToNext;\\\n                        }\\\n                        else {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" += buffer[actualPosition\" + ((channel > 0) ? (\" + \" + channel) : \"\") + \"] * weight;\"\n        }\n        toCompile += \"currentPosition += weight;\\\n                            weight = 0;\\\n                            break;\\\n                        }\\\n                    }\\\n                    if (weight == 0) {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"outputBuffer[outputOffset++] = output\" + channel + \" / ratioWeight;\"\n        }\n        toCompile += \"}\\\n                    else {\\\n                        this.lastWeight = weight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"this.lastOutput[\" + channel + \"] = output\" + channel + \";\"\n        }\n        toCompile += \"this.tailExists = true;\\\n                        break;\\\n                    }\\\n                } while (actualPosition < bufferLength);\\\n                return this.bufferSlice(outputOffset);\\\n            }\\\n            else {\\\n                return (this.noReturn) ? 0 : [];\\\n            }\\\n        }\\\n        else {\\\n            throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\n        }\";\n        this.interpolate = Function(\"buffer\", toCompile);\n    }\n    \n    bypassResampler(buffer) {\n        if (this.noReturn) {\n            //Set the buffer passed as our own, as we don't need to resample it:\n            this.outputBuffer = buffer;\n            return buffer.length;\n        }\n        else {\n            //Just return the buffer passsed:\n            return buffer;\n        }\n    }\n    \n    bufferSlice(sliceAmount) {\n        if (this.noReturn) {\n            //If we're going to access the properties directly from this object:\n            return sliceAmount;\n        }\n        else {\n            //Typed array and normal array buffer section referencing:\n            try {\n                return this.outputBuffer.subarray(0, sliceAmount);\n            }\n            catch (error) {\n                try {\n                    //Regular array pass:\n                    this.outputBuffer.length = sliceAmount;\n                    return this.outputBuffer;\n                }\n                catch (error) {\n                    //Nightly Firefox 4 used to have the subarray function named as slice:\n                    return this.outputBuffer.slice(0, sliceAmount);\n                }\n            }\n        }\n    }\n    \n    initializeBuffers(generateTailCache) {\n        //Initialize the internal buffer:\n        try {\n            this.outputBuffer = new Float32Array(this.outputBufferSize);\n            this.lastOutput = new Float32Array(this.channels);\n        }\n        catch (error) {\n            this.outputBuffer = [];\n            this.lastOutput = [];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/resampler.js","\nexport default class VAD {\n\n  constructor(options) {\n    // Default options\n    this.options = {\n      fftSize: 512*.5,\n      bufferLen: 512*.5, \n      voice_stop: function() {},\n      voice_start: function() {},\n      smoothingTimeConstant: 0.99, \n      energy_offset: 1e-8, // The initial offset.\n      energy_threshold_ratio_pos: 4, // Signal must be twice the offset\n      energy_threshold_ratio_neg: 0.25, // Signal must be half the offset\n      energy_integration: 1, // Size of integration change compared to the signal per second.\n      filter: [\n        {f: 200, v:0}, // 0 -> 200 is 0\n        {f: 2000, v:1} // 200 -> 2k is 1\n      ],\n      source: null,\n      context: null,\n      debug: false,\n    };\n\n    // User options\n    for(var option in options) {\n      if(options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n\n    // Require source\n   if(!this.options.source)\n     throw new Error(\"The options must specify a MediaStreamAudioSourceNode.\");\n\n    // Set this.options.context\n    this.options.context = this.options.source.context;\n\n    // Calculate time relationships\n    this.hertzPerBin = this.options.context.sampleRate / this.options.fftSize;\n    this.iterationFrequency = this.options.context.sampleRate / this.options.bufferLen;\n    this.iterationPeriod = 1 / this.iterationFrequency;\n\n    var DEBUG = this.options.debug;\n    if(DEBUG) {console.log(\n      'Vad' +\n      ' | sampleRate: ' + this.options.context.sampleRate +\n      ' | hertzPerBin: ' + this.hertzPerBin +\n      ' | iterationFrequency: ' + this.iterationFrequency +\n      ' | iterationPeriod: ' + this.iterationPeriod\n    )};\n\n    this.setFilter = function(shape) {\n      this.filter = [];\n      for(var i = 0, iLen = this.options.fftSize / 2; i < iLen; i++) {\n        this.filter[i] = 0;\n        for(var j = 0, jLen = shape.length; j < jLen; j++) {\n          if(i * this.hertzPerBin < shape[j].f) {\n            this.filter[i] = shape[j].v;\n            break; // Exit j loop\n          }\n        }\n      }\n    }\n\n    this.setFilter(this.options.filter);\n\n    this.ready = {};\n    this.vadState = false; // True when Voice Activity Detected\n\n    // Energy detector props\n    this.energy_offset = this.options.energy_offset;\n    this.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n    this.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n    this.voiceTrend = 0;\n    this.voiceTrendMax = 10*1.5;\n    this.voiceTrendMin = -5;\n    this.voiceTrendStart = 2;\n    this.voiceTrendEnd = -5;\n    this.damper = 0.02\n    this.voiceTrendMin = this.voiceTrendEnd - this.damper/10;\n    // Create analyser \n    this.analyser = this.options.context.createAnalyser();\n    this.analyser.smoothingTimeConstant = this.options.smoothingTimeConstant; // 0.99;\n    this.analyser.fftSize = this.options.fftSize;\n\n    this.floatFrequencyData = new Float32Array(this.analyser.frequencyBinCount);\n\n    // Setup local storage of the Linear FFT data\n    this.floatFrequencyDataLinear = new Float32Array(this.floatFrequencyData.length);\n\n    // Connect this.analyser\n    this.options.source.connect(this.analyser); \n\n    // Create ScriptProcessorNode\n    this.scriptProcessorNode = this.options.context.createScriptProcessor(this.options.bufferLen, 1, 1);\n\n    // Connect scriptProcessorNode (Theretically, not required)\n    this.scriptProcessorNode.connect(this.options.context.destination);\n\n    // Create callback to update/analyze floatFrequencyData\n    var self = this;\n    this.scriptProcessorNode.onaudioprocess = function(event) {\n      self.analyser.getFloatFrequencyData(self.floatFrequencyData);\n      self.update();\n      self.monitor();\n    };\n\n    // Connect scriptProcessorNode\n    this.options.source.connect(this.scriptProcessorNode);\n\n    // log stuff\n    this.logging = false;\n    this.log_i = 0;\n    this.log_limit = 100;\n\n    this.triggerLog = function(limit) {\n      this.logging = true;\n      this.log_i = 0;\n      this.log_limit = typeof limit === 'number' ? limit : this.log_limit;\n    }\n\n    this.log = function(msg) {\n      if(this.logging && this.log_i < this.log_limit) {\n        this.log_i++;\n        console.log(msg);\n      } else {\n        this.logging = false;\n      }\n    }\n\n    this.update = function() {\n      // Update the local version of the Linear FFT\n      var fft = this.floatFrequencyData;\n      for(var i = 0, iLen = fft.length; i < iLen; i++) {\n        this.floatFrequencyDataLinear[i] = Math.pow(10, fft[i] / 10);\n      }\n      this.ready = {};\n    }\n\n    this.getEnergy = function() {\n      if(this.ready.energy) {\n        return this.energy;\n      }\n\n      var energy = 0;\n      var fft = this.floatFrequencyDataLinear;\n\n      for(var i = 0, iLen = fft.length; i < iLen; i++) {\n        energy += this.filter[i] * fft[i] * fft[i];\n      }\n\n      this.energy = energy;\n      this.ready.energy = true;\n\n      return energy;\n    }\n\n    this.monitor = function() {\n      var energy = this.getEnergy();\n      var signal = energy - this.energy_offset;\n\n      if(signal > this.energy_threshold_pos) {\n        this.voiceTrend = (this.voiceTrend + 1 > this.voiceTrendMax) ? this.voiceTrendMax : this.voiceTrend + 1;\n      } else if(signal < -this.energy_threshold_neg) {\n        this.voiceTrend = (this.voiceTrend - 1 < this.voiceTrendMin) ? this.voiceTrendMin : this.voiceTrend - 1*(this.vadState ? this.damper : 10);\n      } else {\n        // voiceTrend gets smaller\n        if(this.voiceTrend > 0) {\n          this.voiceTrend--;\n        } else if(this.voiceTrend < 0) {\n          this.voiceTrend++;\n        }\n      }\n\n      var start = false, end = false;\n      if(this.voiceTrend > this.voiceTrendStart) {\n        // Start of speech detected\n        start = true;\n      } else if(this.voiceTrend < this.voiceTrendEnd) {\n        // End of speech detected\n        end = true;\n      }\n\n      // Integration brings in the real-time aspect through the relationship with the frequency this functions is called.\n      var integration = signal * this.iterationPeriod * this.options.energy_integration;\n\n      // Idea?: The integration is affected by the voiceTrend magnitude? - Not sure. Not doing atm.\n\n      // The !end limits the offset delta boost till after the end is detected.\n      if(integration > 0 || !end) {\n        this.energy_offset += integration;\n      } else {\n        this.energy_offset += integration * 10;\n      }\n      this.energy_offset = this.energy_offset < 0 ? 0 : this.energy_offset;\n      this.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n      this.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n      // Broadcast the messages\n      if(start && !this.vadState) {\n        this.vadState = true;\n        this.options.voice_start();\n      }\n      if(end && this.vadState) {\n        this.vadState = false;\n        this.options.voice_stop();\n      }\n\n      this.log(\n        'e: ' + energy +\n        ' | e_of: ' + this.energy_offset +\n        ' | e+_th: ' + this.energy_threshold_pos +\n        ' | e-_th: ' + this.energy_threshold_neg +\n        ' | signal: ' + signal +\n        ' | int: ' + integration +\n        ' | voiceTrend: ' + this.voiceTrend +\n        ' | start: ' + start +\n        ' | end: ' + end\n      );\n\n      return signal;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/vad.js","\nexport default class {\n\n  constructor(canvas_id, sourceNode, audioContext){\n    var self = this\n    this.canvas = document.getElementById(canvas_id)\n    this.canvasContext = this.canvas.getContext(\"2d\")\n    this.loop = false\n    this.sourceNode = sourceNode\n    this.audioContext = audioContext\n    this.analyser = audioContext.createAnalyser();\n    this.analyser.fftSize = 32;\n\n\n    this.sourceNode.connect(this.analyser);\n    \n    this.bufferLength = this.analyser.frequencyBinCount;\n    this.dataArray = new Uint8Array(this.analyser.fftSize);\n\n  }\n\n  stop(){\n    this.loop = false\n    var self = this\n    window.setTimeout(function(){self.clearFrame()}, 200)\n  }\n\n  start(){\n    this.canvas.width = this.canvas.clientWidth;\n    this.canvas.height = this.canvas.clientHeight;    \n    this.WIDTH = this.canvas.clientWidth;\n    this.HEIGHT = this.canvas.clientHeight;    \n    this.loop = true\n    this.renderFrame();\n  }\n\n  renderFrame() {\n    var self = this\n    if (self.loop){\n      \n        window.requestAnimationFrame(function(){self.renderFrame()});\n        self.analyser.getByteFrequencyData(self.dataArray);\n        // self.canvasContext.clearRect(0, 0, self.WIDTH, self.HEIGHT);\n        self.canvasContext.fillStyle = \"#333\";\n        self.canvasContext.fillRect(0, 0, self.WIDTH, self.HEIGHT);\n\n        var barWidth = parseInt((self.WIDTH / self.bufferLength))\n        var barHeight = 0\n        var x = 0;\n\n        for (var i = 0; i < self.bufferLength/2; i++) {\n          barHeight = parseInt(self.dataArray[i]/255*self.HEIGHT*.9);\n          \n          var h = 345\n          var s = parseInt(73 * ( self.HEIGHT/barHeight * .5) )\n          var l = parseInt(90 * ( barHeight/self.HEIGHT))\n          \n          self.canvasContext.fillStyle = \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\";\n          self.canvasContext.fillRect(2*x+1, self.HEIGHT - barHeight, 2*barWidth-2, barHeight);\n\n          x += barWidth;\n\n      }\n      \n    } else {\n      return;\n    }\n  }\n\n  clearFrame(){\n    var self = this\n    self.canvasContext.clearRect(0, 0, self.WIDTH, self.HEIGHT);\n    self.canvasContext.fillStyle = \"#333\";\n    self.canvasContext.fillRect(0, 0, self.WIDTH, self.HEIGHT);    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/visualise.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Korero\"},[_c('div',{staticClass:\"header\"},[_c('h4',[_vm._v(\"Kōrero Māori Word Count (Demo))\")]),_vm._v(\" \"),_c('button',{class:{ vad: _vm.vadOn, on: _vm.recordingOn, 'loading': _vm.loadRecording},attrs:{\"id\":\"startVAD\"}},[_c('i',{staticClass:\"fa fa-microphone\"}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-stop\"}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-spinner fa-spin\"})]),_vm._v(\" \"),_c('div',{class:{ active: _vm.vadOn, 'mobile': _vm.isMobile()},attrs:{\"id\":\"vadStatus\"}},[_c('div',[(!_vm.isMobile())?_c('canvas',{attrs:{\"id\":\"canvas\"}}):_vm._e(),_vm._v(\" \"),(_vm.isMobile() && _vm.vadOn && _vm.recordingOn)?_c('span',[_vm._v(\"Voice Detected\")]):_vm._e(),_vm._v(\" \"),(_vm.isMobile() && _vm.recordingOn && !_vm.vadOn)?_c('span',[_vm._v(\"Listening\")]):_vm._e(),_vm._v(\" \"),(_vm.isMobile())?_c('span',[_vm._v(\"Hit Record\")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"sensitivity_box\",attrs:{\"id\":\"te_reo_sensivity\"}},[_vm._v(\"\\n        Sensitivity:\\n        \"),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":_vm.sensitivity_max},domProps:{\"value\":_vm.te_reo_sensivity},on:{\"input\":function($event){return _vm.setTeReoSensitivity($event)}}}),_vm._v(\"\\n          \"+_vm._s(_vm.te_reo_sensivity)+\"\\n      \")])]),_vm._v(\" \"),_c('div',{staticClass:\"body\"},[_c('div',{attrs:{\"id\":\"transcriptions\"}},_vm._l((_vm.transcriptions),function(item,index){return (item.status != 'Failed')?_c('div',{staticClass:\"transcription\",class:[item.status]},[(item.status != 'Transcribing')?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteObject(index)}}},[_c('i',{staticClass:\"fa fa-times\"})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[(item.status == 'Transcribing')?_c('i',{staticClass:\"fa fa-spinner fa-spin\",class:[item.status]}):_vm._e(),_vm._v(\" \"),(item.status != 'Transcribing')?_c('div',[_vm._v(_vm._s(item.display_count))]):_vm._e()])]):_vm._e()}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"status\"},[_vm._v(\" \"+_vm._s(_vm.status))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c78e17a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Korero.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c78e17a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Korero.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Korero.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Korero.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c78e17a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Korero.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1c78e17a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Korero.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Korero from '@/components/Korero'\nimport vueCustomElement from 'vue-custom-element'\nVue.use(vueCustomElement)\nVue.customElement('vue-widget', Korero)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}