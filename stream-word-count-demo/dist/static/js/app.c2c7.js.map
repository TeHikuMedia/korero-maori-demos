{"version":3,"sources":["webpack:///./api_auth.js","webpack:///src/components/Korero.vue","webpack:///./src/lib/streaming_recorder.js","webpack:///./src/lib/resampler.js","webpack:///./src/lib/vad.js","webpack:///./src/lib/visualise.js","webpack:///./src/components/Korero.vue?568d","webpack:///./src/components/Korero.vue","webpack:///./src/main.js"],"names":["api_auth","headers","Authorization","url","exports","__webpack_require__","Korero","name","data","vadOn","recordingOn","recorder","buttonText","transcriptions","icon","loadRecording","te_reo_sensivity","vad_sensitivity","sensitivity_max","status","totalCount","methods","deleteObject","e","this","splice","stopRecording","stop","isMobile","test","navigator","userAgent","console","log","setTeReoSensivity","target","value","sensitivity_sock","readyState","sensitivity","parseInt","send","setVadSensivity","processResult","text","current","total_count","active_count","animateCount","display_count","active","setTimeout","initWebSocket","socket_url","socket","WebSocket","binaryType","self","onmessage","message","isTrusted","onclose","onerror","err","ensureWebSocket","CLOSED","CLOSING","initSensitivitySocket","mounted","startVAD","onclick","event","unshift","constructor","options","beforeRecording","pauseRecording","processAudio","afterRecording","micFailed","voiceStop","voiceStart","visCanvasID","canvasID","bitRate","sampleRate","bufferSize","records","sampler","fromSampleRate","toSampleRate","channels","outputBufferSize","noReturn","initialize","Error","resampler","bypassResampler","ratioWeight","compileInterpolationFunction","interpolate","tailExists","lastWeight","initializeBuffers","toCompile","channel","Function","buffer","outputBuffer","length","bufferSlice","sliceAmount","subarray","error","slice","generateTailCache","Float32Array","lastOutput","isPause","isRecording","volume","vad","vis","activity","context","window","AudioContext","webkitAudioContext","close","start","mediaDevices","getUserMedia","video","audio","channelCount","echoCancellation","then","_micCaptured","bind","catch","_micError","processor","disconnect","pause","stream","getTracks","forEach","track","input","recordList","lastRecord","_floatTo16BitPCM","output","i","s","Math","max","min","_convertTo16BitPCM","arrayBuffer","out","Int16Array","createMediaStreamSource","createScriptProcessor","_voiceStop","_voiceStart","debug","source","voice_stop","voice_start","option","fftSize","bufferLen","smoothingTimeConstant","energy_offset","energy_threshold_ratio_pos","energy_threshold_ratio_neg","energy_integration","filter","f","v","hasOwnProperty","hertzPerBin","iterationFrequency","iterationPeriod","setFilter","shape","iLen","j","jLen","ready","vadState","energy_threshold_pos","energy_threshold_neg","voiceTrend","voiceTrendMax","voiceTrendMin","voiceTrendStart","voiceTrendEnd","damper","analyser","createAnalyser","floatFrequencyData","frequencyBinCount","floatFrequencyDataLinear","connect","scriptProcessorNode","destination","onaudioprocess","getFloatFrequencyData","update","monitor","logging","log_i","log_limit","triggerLog","limit","msg","fft","pow","getEnergy","energy","signal","end","integration","canvas_id","sourceNode","audioContext","canvas","document","getElementById","canvasContext","getContext","loop","bufferLength","dataArray","Uint8Array","clearFrame","width","clientWidth","height","clientHeight","WIDTH","HEIGHT","renderFrame","requestAnimationFrame","getByteFrequencyData","fillStyle","fillRect","barWidth","barHeight","x","l","clearRect","ev","sample","inputBuffer","getChannelData","sum","sqrt","toFixed","resampled","streamer","components_Korero","render","_vm","_h","$createElement","_c","_self","staticClass","_v","class","on","loading","attrs","id","mobile","_e","type","domProps","$event","_s","_l","item","index","click","staticRenderFns","src_components_Korero","normalizeComponent","ssrContext","Vue","use","vueCustomElement","customElement"],"mappings":"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","file":"static/js/app.c2c7.js","sourcesContent":["api_auth = {\n  headers:{\n    Authorization: \"Token YOUR_TOKEN_HERE\",\n  },\n  url: 'https://koreromaori.io/api/transcription/?method=stream'\n}\n\nexports.api_auth = api_auth\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./api_auth.js\n// module id = BLBT\n// module chunks = 1","<template>\n  <div class=\"Korero\">\n    <div class=\"header\">\n      <h4>Kōrero Māori Word Count (Demo))</h4>\n      <button id=\"startVAD\" v-bind:class=\"{ vad: vadOn, on: recordingOn, 'loading': loadRecording}\">\n        <i class=\"fa fa-microphone\" ></i>\n        <i class=\"fa fa-stop\" ></i>\n        <i class=\"fa fa-spinner fa-spin\"></i>\n      </button>\n      <div id=\"vadStatus\" v-bind:class=\"{ active: vadOn, 'mobile': isMobile()}\">\n        <div>\n          <canvas id=\"canvas\" v-if=\"!isMobile()\"></canvas>\n          <span v-if=\"isMobile() && vadOn && recordingOn\">Voice Detected</span>\n          <span v-if=\"isMobile() && recordingOn && !vadOn\">Listening</span>\n          <span v-if=\"isMobile()\">Hit Record</span>\n        </div>\n      </div>\n   \n\n    <div id=\"te_reo_sensivity\"  class=\"sensitivity_box\">\n        Sensitivity:\n        <input\n          type=\"range\"\n          min=\"0\"\n          v-bind:max=\"sensitivity_max\"\n          v-bind:value=\"te_reo_sensivity\"\n          v-on:input=\"setTeReoSensivity($event)\">\n          {{ te_reo_sensivity }}\n      </div>\n<!--       <div id=\"vad_sensitivity\" class=\"sensitivity_box\">\n        Voice Activity Sensitivity:\n        <input\n          type=\"range\"\n          min=\"0\"\n          v-bind:max=\"sensitivity_max\"\n          v-bind:value=\"vad_sensitivity\"\n          v-on:input=\"setVadSensivity($event)\">\n          {{ vad_sensitivity }}\n      </div> -->\n  </div>\n\n    <div class=\"body\">\n      <div id=\"transcriptions\">\n        <div v-for=\"(item, index) in transcriptions\" class='transcription' v-bind:class=\"[item.status]\" v-if=\"item.status != 'Failed'\"> \n          <button class=\"delete\" v-if=\"item.status != 'Transcribing'\" v-on:click=\"deleteObject(index)\"><i class=\"fa fa-times\"></i></button>\n          <div class='text'>\n            <i class=\"fa fa-spinner fa-spin\" v-bind:class=\"[item.status]\" v-if=\"item.status == 'Transcribing'\" ></i>\n          \n            <div v-if=\"item.status != 'Transcribing'\">{{item.display_count}}</div>\n        \n          </div>\n        </div>\n      </div>\n      \n    </div>\n\n    <div class=\"footer\">\n      <div class='status'> {{status}}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport recorder from '../lib/streaming_recorder.js';\nconst ApiAuth = require('../../api_auth');\nconst api_auth = ApiAuth.api_auth;\n// import 'ws-audio-api';\n// const streamer = WSAudioAPI.Streamer();\n//const axios = require('axios');\nexport default {\n  name: 'Kōrero',\n  data () {\n    return {\n\n      vadOn: false,\n      recordingOn: false,\n      recorder: null,\n      buttonText: 'Start',\n      transcriptions: [],\n      icon: 'fa-microphone',\n      loadRecording: false,\n      te_reo_sensivity: 85,\n      vad_sensitivity: 10,\n      sensitivity_max: 100,\n      status: '',\n      totalCount : 0\n    }\n  },\n  methods: {\n    deleteObject: function (e) {\n      this.transcriptions.splice(e, 1)\n    },\n    stopRecording: function () {\n      try{this.recorder.stop();}\n      catch(e){}\n      this.recorder=null;\n      this.vadOn = false;\n      this.recordingOn = false\n    },   \n    isMobile() {\n      if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Mobile|SamsungBrowser|Opera Mini/i.test(navigator.userAgent)) {\n        console.log(navigator.userAgent)\n        return true\n      } else {\n        return false\n      }\n    },\n    setTeReoSensivity: function(e) {\n      this.te_reo_sensivity=e.target.value;\n      if (this.sensitivity_sock.readyState == 1)  {\n        var tmp = parseInt(this.te_reo_sensivity)\n        var sensitivity = \"\" + tmp / this.sensitivity_max;\n        // if the server received 'Text' that can be \n        // interpreted as a float, it assumes its sensititvy \n        this.sensitivity_sock.send(sensitivity);\n      }\n\n    },\n    setVadSensivity: function(e) {\n      this.vad_sensitivity=e.target.value;\n    },\n    processResult: function(text) {\n      var current = this.transcriptions[0];\n      if (current) {\n        if (text=='EOS') {\n          current.total_count = current.total_count + current.active_count;\n          current.active_count = 0;\n        }\n        else {  \n          current.active_count = parseInt(text);\n          current.status = 'Success';\n        }\n\n        this.animateCount();\n      }\n    },\n    animateCount: function() {\n      var current = this.transcriptions[0];\n      if (current) {\n          if (current.display_count == current.total_count) {\n            current.active=false;\n            return;\n          }\n\n          if (current.display_count < current.total_count) {\n            current.display_count += 1;\n            current.active=true;\n          }\n\n          if (current.display_count > current.display_count) {\n            current.display_count -= 1;\n            current.active=true;\n          }\n\n          setTimeout(this.animateCount, 150);\n      }\n    },\n\n    initWebSocket: function() {\n\n        var socket_url = process.env.ASR_WEBSOCKET_ENDPOINT + \"/word_count\";\n        this.status = \"Connecting to \" + socket_url;\n        this.socket = new WebSocket(socket_url);\n        this.socket.binaryType = 'arraybuffer';\n        var self = this;\n        this.socket.onmessage = function(message) {\n          //console.log(message);\n          self.status = \"Connected to  \" + socket_url;\n          if (message.isTrusted) {\n              self.processResult(message.data);\n          }\n        };\n        this.socket.onclose = function () {\n          self.status = \"Last connected \" + socket_url;\n          console.log('Connection to server closed');\n        };\n        this.socket.onerror = function (err) {\n           self.status = \"Error getting data \" + err;\n           console.log('Getting audio data error:', err);\n        };\n    },\n\n    ensureWebSocket: function() {\n      self = this;\n      if (this.socket == null) {\n        this.initWebSocket();\n      }\n      else {\n        var readyState = this.socket.readyState;\n\n        if (readyState == WebSocket.CLOSED) {\n          this.initWebSocket();\n        }\n\n        if (readyState == WebSocket.CLOSING) {\n          this.socket.onclose = function () {\n            self.initWebSocket();\n          }\n        } \n        // otherwise, if WebSocket.CONNECTING || WebSocket.OPEN \n        // just let nature take its course\n      }\n    },\n\n    initSensitivitySocket: function() {\n\n        var socket_url = process.env.ASR_WEBSOCKET_ENDPOINT + \"/word_count_sensitivity\"\n        console.log( \"Connecting to \" + socket_url);\n        this.sensitivity_sock = new WebSocket(socket_url);\n        this.sensitivity_sock.binaryType = 'arraybuffer';\n        this.sensitivity_sock.onmessage = function(message) {\n          console.log(\"Connected to  \" + socket_url);\n        };\n    }\n\n  },\n  mounted: function () {\n\n    this.initSensitivitySocket();\n    startVAD.onclick = event => {\n      if (this.recorder==null) {\n        this.loadRecording = true;\n        var transcription = { \n          status: 'Transcribing',\n          display_count: 0, \n          total_count: 0,\n          active_count: 0\n        }\n        this.transcriptions.unshift(transcription)\n\n        this.initWebSocket();\n\n        this.recorder = new recorder({\n         \n          processAudio: (buffer) => {\n            if (this.socket.readyState == 1)  {\n              this.socket.send(buffer);\n            }\n          },\n\n          afterRecording: (stream) => {\n            if (this.socket.readyState == 1)  {\n              this.socket.send('EOS');\n            }\n          },\n\n          pauseRecording: () => {\n            streamer.stop();\n            console.log('paused')\n          },\n\n          micFailed: () => {\n            console.log('failed')\n          },\n          \n          voiceStop: () => {\n            this.vadOn = false\n          },\n\n          voiceStart: () => {\n            this.vadOn = true\n            this.ensureWebSocket()\n          },\n\n          canvasID: this.isMobile() ? null : 'canvas',\n          bitRate         : 64,\n          sampleRate      : 44100,\n          // format          : this.format\n        })\n      }\n\n      if (this.recordingOn) {\n        this.recorder.stop();\n        this.recorder=null;\n        this.vadOn = false;\n        this.recordingOn = false\n        // this.buttonText = 'Start'\n      } else {\n        this.recorder.start()\n        this.recordingOn = true\n        this.buttonText = 'Stop'\n        this.loadRecording = false\n      }\n\n    }\n  }\n}\n\n\n</script>\n\n<style scoped>\n\n.Korero {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  font-size: 14px;\n}\nbutton.delete{\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  display: block;\n  border: 0px;\n  margin: 2px;\n  font-size: 0.7em;\n  color: #696969;\n  cursor: pointer;\n  outline: none;\n  background: none;\n}\n.transcription{\n  position: relative;\n  width: 100%;\n  margin: 20px 30px 20px 30px;\n  max-width: 500px;\n  /*margin-top: 20px; */\n  font-size: 1.5em;\n  border-radius: 8px;\n  /*box-shadow: 0px 2px 6px -2px rgba(0,0,0,1)  */\n  border: 1px solid black;\n}\n.transcription.Transcribing{\n  border: 0px;\n}\n.transcription .text {\n  padding: 15px 20px;\n  font-size: 4em;\n}\n.transcription:nth-of-type(1){\n  margin-top: 40px;\n}\n\n.transcription .active {\n  color: lightcoral;\n}\n\ndiv.transcription.Success div.text [class*=fa]{\n  display: none;\n}\n.Korero, .header, .body{\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.body{\n  height: 100vh;\n  margin-top: -225px;\n}\n.header{\n  padding-bottom: 15px;\n  z-index: 1;\n  background-color: white;\n  padding-left: 15px;\n  padding-right: 15px;  \n}\n.footer .status {\n  margin-top: -15px;\n  margin-bottom: 15px;\n  font-style: italic;\n}\n\n#transcriptions{\n  z-index: 0;\n  display: flex;\n  flex-direction: column;\n  overflow-y: scroll;\n  flex-wrap: nowrap;\n  -webkit-overflow-scrolling: touch;\n  -ms-overflow-style: -ms-autohiding-scrollbar; \n  align-items: center;  \n  margin-top: 232px;\n  height: 100vh;    \n  padding-left: 15px;\n  padding-right: 15px;\n}\n\n#vadStatus{\n  display: flex;\n  width: 100%;\n  max-width: 500px;  \n  height: 100px;\n  align-self: center;\n  align-items: center;\n}\n#vadStatus canvas{\n  z-index: 1;\n  display: block;\n  height: 100%;\n  width: 100%;\n  background-color: #333;\n}\n#vadStatus div{\n  height: 100%;\n  width: 100%;\n  border: 4px solid black;\n  border-radius: 4px;\n}\n#vadStatus.active div{\n  border-color: red;\n}\n#vadStatus.mobile{\n  height: 28px;\n  max-width: 150px;  \n}\n#vadStatus.mobile div span{\n  display: block;\n  padding: 4px;\n}\n#vadStatus.mobile div{\n  color: white;\n  font-weight: 700;\n  background-color: black;\n}\n#vadStatus.mobile.active div{\n  background-color: red;\n}\n#startVAD {\n  z-index: 2;\n  align-self: center;\n  margin: 15px;\n  outline: none;\n  background-color: rgb(40,40,40);\n  color: white;\n  width: 80px;\n  height: 80px;\n  border: 2px solid black;\n  border-radius: 40px;\n  padding: 8px 16px;\n  cursor: pointer;\n}\n#startVAD [class*=fa]{\n  font-size: 34px !important;\n}\n#startVAD.on {\n  background-color: rgba(255, 40, 40, 0.75);\n  border-color: rgb(200, 40, 40);\n}\n#startVAD.on.vad {\n  background-color: rgba(255, 40, 40, 1);\n}\n#startVAD.on .fa-microphone{\n  display: none;\n}\n#startVAD .fa-stop, #startVAD .fa-spinner{\n  display: none;\n}\n#startVAD.on .fa-stop{\n  display: initial;\n}\n#startVAD.on.loading .fa-spinner{\n  display: initial;\n}\naudio{\n  outline: none;\n  width: 100%;\n  padding-bottom: 15px;\n}\n.audio{\n  padding: 0px 15px 0px 15px;\n}\ndiv.sensitivity_box {\n  padding: 5px;\n  margin: 5px 0 10px 0;\n  align-self: center;\n  text-align: right;\n}\ndiv.sensitivity_box input {\n  width: 200px;\n}\n\ndiv.confidence{\n  display: inline-flex;\n  flex-wrap: wrap;\n}\ndiv.char{\n  /*line-height: 20px;*/\n}\ndiv.char-wrapper{\n  width: 20px;\n  display: inline-block;\n  text-align: center;\n}\ndiv.word{\n  margin-right: 20px;\n}\ndiv.word:last-child{\n  margin-right: 0px;\n}\ndiv.word-wrapper{\n  /*width: 20px*/\n}\nspan.char{\n  display: inline-block;\n  width: 20px;\n  text-align: center;\n}\nspan.prob{\n  display: inline-block;\n  font-size: 8px;\n  /*line-he*/ight: 0px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Korero.vue","import Resampler from './resampler'\nimport VAD from './vad.js'\nimport vis from './visualise'\n\nexport default class {\n  constructor (options = {}) {\n    this.beforeRecording   = options.beforeRecording\n    this.pauseRecording    = options.pauseRecording\n    this.processAudio      = options.processAudio\n    this.afterRecording    = options.afterRecording\n    this.micFailed         = options.micFailed\n    this.voiceStop         = options.voiceStop\n    this.voiceStart        = options.voiceStart\n    this.visCanvasID       = options.canvasID || null\n\n    this.bitRate = options.bitRate || 96\n    this.sampleRate = options.sampleRate || 16000\n    this.bufferSize = 4096\n    this.records    = []\n\n    this.sampler = new Resampler(this.sampleRate, 16000, 1, this.bufferSize)\n\n    this.isPause     = false\n    this.isRecording = false\n\n    this.volume   = 0\n\n    this.vad = null\n    this.vis = null\n    this.activity = false\n\n    this.vis = null\n\n    // Set Sample Rate according to device and browser campability\n    this.context = new(window.AudioContext || window.webkitAudioContext)()\n    this.sampleRate = this.context.sampleRate\n    this.context.close()\n  }\n\n\n  start () {\n    const constraints = {\n      video: false,\n      audio: {\n        channelCount: 1,\n        echoCancellation: true\n      }\n    }\n\n    this.beforeRecording && this.beforeRecording('start recording')\n\n    navigator.mediaDevices\n             .getUserMedia(constraints)\n             .then(this._micCaptured.bind(this))\n             .catch(this._micError.bind(this))\n    this.isPause = false\n    this.isRecording = true\n\n  }\n\n  stop () {\n    if (this.vis){\n      this.vis.stop()\n    }\n\n    // this.stream.getTracks().forEach((track) => track.stop())\n    // this.input.disconnect()\n    if (this.processor)\n      this.processor.disconnect()\n    if (this.context)\n      this.context.close()\n\n    this.isPause     = false\n    this.isRecording = false\n\n    \n  }\n\n  pause () {\n    this.stream.getTracks().forEach((track) => track.stop())\n    this.input.disconnect()\n    this.processor.disconnect()\n    this.context.close()\n\n    this.isPause = true\n\n    this.pauseRecording && this.pauseRecording('pause recording')\n  }\n\n  recordList () {\n    return this.records\n  }\n\n  lastRecord () {\n    return this.records.slice(-1)\n  }\n\n  _floatTo16BitPCM(input, output) {\n    for (let i = 0; i < input.length; i++) {\n      const s = Math.max(-1, Math.min(1, input[i]))\n      output[i] = (s < 0 ? s * 0x8000 : s * 0x7FFF)\n    }\n  }\n\n  _convertTo16BitPCM(arrayBuffer) {\n    const data = new Float32Array(arrayBuffer)\n    const out = new Int16Array(arrayBuffer.length)\n    this._floatTo16BitPCM(data, out)\n    return out\n  }\n\n  _micCaptured (stream) {\n    this.context    = new(window.AudioContext || window.webkitAudioContext)({sampleRate: this.sampleRate})\n    this.input      = this.context.createMediaStreamSource(stream)\n    this.processor  = this.context.createScriptProcessor(this.bufferSize, 1, 1)\n    this.stream     = stream\n\n    this._voiceStop = () => {\n      this.voiceStop()\n      this.activity = false\n      if (this.afterRecording) {\n          this.afterRecording();\n      }\n    }\n    this._voiceStart = () => {\n      this.voiceStart()\n      this.activity = true\n    }\n\n    // Create VAD\n    var options = {\n      debug: false,\n      source: this.input,\n      voice_stop: this._voiceStop,\n      voice_start: this._voiceStart,\n    };         \n    this.vad = new VAD(options)\n    //this.vad.triggerLog()\n    \n    // create visualisation\n    if (this.visCanvasID){\n      try{\n        this.vis = new vis(this.visCanvasID, this.input, this.input.context)\n        this.vis.start()\n      } catch(error){\n        console.log(error)\n      }\n    }\n\n    this.processor.onaudioprocess = (ev) => {\n      var sample = ev.inputBuffer.getChannelData(0);\n\n      //work out volume\n      let sum = 0.0\n      for (let i = 0; i < sample.length; ++i) {\n        sum += sample[i] * sample[i]\n      }\n      this.volume = Math.sqrt(sum / sample.length).toFixed(2)\n\n      // streaming callback to processAudio \n      // - if we're in voice detection and the callback is defined\n      if (this.activity) {\n        if (this.processAudio) {\n            var resampled = this.sampler.resampler(sample);\n            var buffer = this._convertTo16BitPCM(resampled)\n            this.processAudio(buffer);\n        }\n      }\n    }\n\n    this.input.connect(this.processor)\n    this.processor.connect(this.context.destination)\n  }\n\n  _micError (error) {\n    this.micFailed && this.micFailed(error)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/streaming_recorder.js","//JavaScript Audio Resampler (c) 2011 - Grant Galitz\nexport default class {\n\n    constructor(fromSampleRate, toSampleRate, channels, outputBufferSize, noReturn) {\n        this.fromSampleRate = fromSampleRate;\n        this.toSampleRate = toSampleRate;\n        this.channels = channels | 0;\n        this.outputBufferSize = outputBufferSize;\n        this.noReturn = !!noReturn;\n        this.initialize();\n    }\n\n    initialize() {\n        //Perform some checks:\n        if (this.fromSampleRate > 0 && this.toSampleRate > 0 && this.channels > 0) {\n            if (this.fromSampleRate == this.toSampleRate) {\n                //Setup a resampler bypass:\n                this.resampler = this.bypassResampler;      //Resampler just returns what was passed through.\n                this.ratioWeight = 1;\n            }\n            else {\n                //Setup the interpolation resampler:\n                this.compileInterpolationFunction();\n                this.resampler = this.interpolate;          //Resampler is a custom quality interpolation algorithm.\n                this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n                this.tailExists = false;\n                this.lastWeight = 0;\n                this.initializeBuffers();\n            }\n        }\n        else {\n            throw(new Error(\"Invalid settings specified for the resampler.\"));\n        }\n    }\n\n    compileInterpolationFunction() {\n        var toCompile = \"var bufferLength = Math.min(buffer.length, this.outputBufferSize);\\\n        if ((bufferLength % \" + this.channels + \") == 0) {\\\n            if (bufferLength > 0) {\\\n                var ratioWeight = this.ratioWeight;\\\n                var weight = 0;\";\n        for (var channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"var output\" + channel + \" = 0;\"\n        }\n        toCompile += \"var actualPosition = 0;\\\n                var amountToNext = 0;\\\n                var alreadyProcessedTail = !this.tailExists;\\\n                this.tailExists = false;\\\n                var outputBuffer = this.outputBuffer;\\\n                var outputOffset = 0;\\\n                var currentPosition = 0;\\\n                do {\\\n                    if (alreadyProcessedTail) {\\\n                        weight = ratioWeight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" = 0;\"\n        }\n        toCompile += \"}\\\n                    else {\\\n                        weight = this.lastWeight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" = this.lastOutput[\" + channel + \"];\"\n        }\n        toCompile += \"alreadyProcessedTail = true;\\\n                    }\\\n                    while (weight > 0 && actualPosition < bufferLength) {\\\n                        amountToNext = 1 + actualPosition - currentPosition;\\\n                        if (weight >= amountToNext) {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" += buffer[actualPosition++] * amountToNext;\"\n        }\n        toCompile += \"currentPosition = actualPosition;\\\n                            weight -= amountToNext;\\\n                        }\\\n                        else {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"output\" + channel + \" += buffer[actualPosition\" + ((channel > 0) ? (\" + \" + channel) : \"\") + \"] * weight;\"\n        }\n        toCompile += \"currentPosition += weight;\\\n                            weight = 0;\\\n                            break;\\\n                        }\\\n                    }\\\n                    if (weight == 0) {\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"outputBuffer[outputOffset++] = output\" + channel + \" / ratioWeight;\"\n        }\n        toCompile += \"}\\\n                    else {\\\n                        this.lastWeight = weight;\";\n        for (channel = 0; channel < this.channels; ++channel) {\n            toCompile += \"this.lastOutput[\" + channel + \"] = output\" + channel + \";\"\n        }\n        toCompile += \"this.tailExists = true;\\\n                        break;\\\n                    }\\\n                } while (actualPosition < bufferLength);\\\n                return this.bufferSlice(outputOffset);\\\n            }\\\n            else {\\\n                return (this.noReturn) ? 0 : [];\\\n            }\\\n        }\\\n        else {\\\n            throw(new Error(\\\"Buffer was of incorrect sample length.\\\"));\\\n        }\";\n        this.interpolate = Function(\"buffer\", toCompile);\n    }\n    \n    bypassResampler(buffer) {\n        if (this.noReturn) {\n            //Set the buffer passed as our own, as we don't need to resample it:\n            this.outputBuffer = buffer;\n            return buffer.length;\n        }\n        else {\n            //Just return the buffer passsed:\n            return buffer;\n        }\n    }\n    \n    bufferSlice(sliceAmount) {\n        if (this.noReturn) {\n            //If we're going to access the properties directly from this object:\n            return sliceAmount;\n        }\n        else {\n            //Typed array and normal array buffer section referencing:\n            try {\n                return this.outputBuffer.subarray(0, sliceAmount);\n            }\n            catch (error) {\n                try {\n                    //Regular array pass:\n                    this.outputBuffer.length = sliceAmount;\n                    return this.outputBuffer;\n                }\n                catch (error) {\n                    //Nightly Firefox 4 used to have the subarray function named as slice:\n                    return this.outputBuffer.slice(0, sliceAmount);\n                }\n            }\n        }\n    }\n    \n    initializeBuffers(generateTailCache) {\n        //Initialize the internal buffer:\n        try {\n            this.outputBuffer = new Float32Array(this.outputBufferSize);\n            this.lastOutput = new Float32Array(this.channels);\n        }\n        catch (error) {\n            this.outputBuffer = [];\n            this.lastOutput = [];\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/resampler.js","\nexport default class VAD {\n\n  constructor(options) {\n    // Default options\n    this.options = {\n      fftSize: 512*.5,\n      bufferLen: 512*.5, \n      voice_stop: function() {},\n      voice_start: function() {},\n      smoothingTimeConstant: 0.99, \n      energy_offset: 1e-8, // The initial offset.\n      energy_threshold_ratio_pos: 4, // Signal must be twice the offset\n      energy_threshold_ratio_neg: 0.25, // Signal must be half the offset\n      energy_integration: 1, // Size of integration change compared to the signal per second.\n      filter: [\n        {f: 200, v:0}, // 0 -> 200 is 0\n        {f: 2000, v:1} // 200 -> 2k is 1\n      ],\n      source: null,\n      context: null,\n      debug: false,\n    };\n\n    // User options\n    for(var option in options) {\n      if(options.hasOwnProperty(option)) {\n        this.options[option] = options[option];\n      }\n    }\n\n    // Require source\n   if(!this.options.source)\n     throw new Error(\"The options must specify a MediaStreamAudioSourceNode.\");\n\n    // Set this.options.context\n    this.options.context = this.options.source.context;\n\n    // Calculate time relationships\n    this.hertzPerBin = this.options.context.sampleRate / this.options.fftSize;\n    this.iterationFrequency = this.options.context.sampleRate / this.options.bufferLen;\n    this.iterationPeriod = 1 / this.iterationFrequency;\n\n    var DEBUG = this.options.debug;\n    if(DEBUG) {console.log(\n      'Vad' +\n      ' | sampleRate: ' + this.options.context.sampleRate +\n      ' | hertzPerBin: ' + this.hertzPerBin +\n      ' | iterationFrequency: ' + this.iterationFrequency +\n      ' | iterationPeriod: ' + this.iterationPeriod\n    )};\n\n    this.setFilter = function(shape) {\n      this.filter = [];\n      for(var i = 0, iLen = this.options.fftSize / 2; i < iLen; i++) {\n        this.filter[i] = 0;\n        for(var j = 0, jLen = shape.length; j < jLen; j++) {\n          if(i * this.hertzPerBin < shape[j].f) {\n            this.filter[i] = shape[j].v;\n            break; // Exit j loop\n          }\n        }\n      }\n    }\n\n    this.setFilter(this.options.filter);\n\n    this.ready = {};\n    this.vadState = false; // True when Voice Activity Detected\n\n    // Energy detector props\n    this.energy_offset = this.options.energy_offset;\n    this.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n    this.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n    this.voiceTrend = 0;\n    this.voiceTrendMax = 10*1.5;\n    this.voiceTrendMin = -5;\n    this.voiceTrendStart = 2;\n    this.voiceTrendEnd = -5;\n    this.damper = 0.02\n    this.voiceTrendMin = this.voiceTrendEnd - this.damper/10;\n    // Create analyser \n    this.analyser = this.options.context.createAnalyser();\n    this.analyser.smoothingTimeConstant = this.options.smoothingTimeConstant; // 0.99;\n    this.analyser.fftSize = this.options.fftSize;\n\n    this.floatFrequencyData = new Float32Array(this.analyser.frequencyBinCount);\n\n    // Setup local storage of the Linear FFT data\n    this.floatFrequencyDataLinear = new Float32Array(this.floatFrequencyData.length);\n\n    // Connect this.analyser\n    this.options.source.connect(this.analyser); \n\n    // Create ScriptProcessorNode\n    this.scriptProcessorNode = this.options.context.createScriptProcessor(this.options.bufferLen, 1, 1);\n\n    // Connect scriptProcessorNode (Theretically, not required)\n    this.scriptProcessorNode.connect(this.options.context.destination);\n\n    // Create callback to update/analyze floatFrequencyData\n    var self = this;\n    this.scriptProcessorNode.onaudioprocess = function(event) {\n      self.analyser.getFloatFrequencyData(self.floatFrequencyData);\n      self.update();\n      self.monitor();\n    };\n\n    // Connect scriptProcessorNode\n    this.options.source.connect(this.scriptProcessorNode);\n\n    // log stuff\n    this.logging = false;\n    this.log_i = 0;\n    this.log_limit = 100;\n\n    this.triggerLog = function(limit) {\n      this.logging = true;\n      this.log_i = 0;\n      this.log_limit = typeof limit === 'number' ? limit : this.log_limit;\n    }\n\n    this.log = function(msg) {\n      if(this.logging && this.log_i < this.log_limit) {\n        this.log_i++;\n        console.log(msg);\n      } else {\n        this.logging = false;\n      }\n    }\n\n    this.update = function() {\n      // Update the local version of the Linear FFT\n      var fft = this.floatFrequencyData;\n      for(var i = 0, iLen = fft.length; i < iLen; i++) {\n        this.floatFrequencyDataLinear[i] = Math.pow(10, fft[i] / 10);\n      }\n      this.ready = {};\n    }\n\n    this.getEnergy = function() {\n      if(this.ready.energy) {\n        return this.energy;\n      }\n\n      var energy = 0;\n      var fft = this.floatFrequencyDataLinear;\n\n      for(var i = 0, iLen = fft.length; i < iLen; i++) {\n        energy += this.filter[i] * fft[i] * fft[i];\n      }\n\n      this.energy = energy;\n      this.ready.energy = true;\n\n      return energy;\n    }\n\n    this.monitor = function() {\n      var energy = this.getEnergy();\n      var signal = energy - this.energy_offset;\n\n      if(signal > this.energy_threshold_pos) {\n        this.voiceTrend = (this.voiceTrend + 1 > this.voiceTrendMax) ? this.voiceTrendMax : this.voiceTrend + 1;\n      } else if(signal < -this.energy_threshold_neg) {\n        this.voiceTrend = (this.voiceTrend - 1 < this.voiceTrendMin) ? this.voiceTrendMin : this.voiceTrend - 1*(this.vadState ? this.damper : 10);\n      } else {\n        // voiceTrend gets smaller\n        if(this.voiceTrend > 0) {\n          this.voiceTrend--;\n        } else if(this.voiceTrend < 0) {\n          this.voiceTrend++;\n        }\n      }\n\n      var start = false, end = false;\n      if(this.voiceTrend > this.voiceTrendStart) {\n        // Start of speech detected\n        start = true;\n      } else if(this.voiceTrend < this.voiceTrendEnd) {\n        // End of speech detected\n        end = true;\n      }\n\n      // Integration brings in the real-time aspect through the relationship with the frequency this functions is called.\n      var integration = signal * this.iterationPeriod * this.options.energy_integration;\n\n      // Idea?: The integration is affected by the voiceTrend magnitude? - Not sure. Not doing atm.\n\n      // The !end limits the offset delta boost till after the end is detected.\n      if(integration > 0 || !end) {\n        this.energy_offset += integration;\n      } else {\n        this.energy_offset += integration * 10;\n      }\n      this.energy_offset = this.energy_offset < 0 ? 0 : this.energy_offset;\n      this.energy_threshold_pos = this.energy_offset * this.options.energy_threshold_ratio_pos;\n      this.energy_threshold_neg = this.energy_offset * this.options.energy_threshold_ratio_neg;\n\n      // Broadcast the messages\n      if(start && !this.vadState) {\n        this.vadState = true;\n        this.options.voice_start();\n      }\n      if(end && this.vadState) {\n        this.vadState = false;\n        this.options.voice_stop();\n      }\n\n      this.log(\n        'e: ' + energy +\n        ' | e_of: ' + this.energy_offset +\n        ' | e+_th: ' + this.energy_threshold_pos +\n        ' | e-_th: ' + this.energy_threshold_neg +\n        ' | signal: ' + signal +\n        ' | int: ' + integration +\n        ' | voiceTrend: ' + this.voiceTrend +\n        ' | start: ' + start +\n        ' | end: ' + end\n      );\n\n      return signal;\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lib/vad.js","\nexport default class {\n\n  constructor(canvas_id, sourceNode, audioContext){\n    var self = this\n    this.canvas = document.getElementById(canvas_id)\n    this.canvasContext = this.canvas.getContext(\"2d\")\n    this.loop = false\n    this.sourceNode = sourceNode\n    this.audioContext = audioContext\n    this.analyser = audioContext.createAnalyser();\n    this.analyser.fftSize = 32;\n\n\n    this.sourceNode.connect(this.analyser);\n    \n    this.bufferLength = this.analyser.frequencyBinCount;\n    this.dataArray = new Uint8Array(this.analyser.fftSize);\n\n  }\n\n  stop(){\n    this.loop = false\n    var self = this\n    window.setTimeout(function(){self.clearFrame()}, 200)\n  }\n\n  start(){\n    this.canvas.width = this.canvas.clientWidth;\n    this.canvas.height = this.canvas.clientHeight;    \n    this.WIDTH = this.canvas.clientWidth;\n    this.HEIGHT = this.canvas.clientHeight;    \n    this.loop = true\n    this.renderFrame();\n  }\n\n  renderFrame() {\n    var self = this\n    if (self.loop){\n      \n        window.requestAnimationFrame(function(){self.renderFrame()});\n        self.analyser.getByteFrequencyData(self.dataArray);\n        // self.canvasContext.clearRect(0, 0, self.WIDTH, self.HEIGHT);\n        self.canvasContext.fillStyle = \"#333\";\n        self.canvasContext.fillRect(0, 0, self.WIDTH, self.HEIGHT);\n\n        var barWidth = parseInt((self.WIDTH / self.bufferLength))\n        var barHeight = 0\n        var x = 0;\n\n        for (var i = 0; i < self.bufferLength/2; i++) {\n          barHeight = parseInt(self.dataArray[i]/255*self.HEIGHT*.9);\n          \n          var h = 345\n          var s = parseInt(73 * ( self.HEIGHT/barHeight * .5) )\n          var l = parseInt(90 * ( barHeight/self.HEIGHT))\n          \n          self.canvasContext.fillStyle = \"hsl(\" + h + \",\" + s + \"%,\" + l + \"%)\";\n          self.canvasContext.fillRect(2*x+1, self.HEIGHT - barHeight, 2*barWidth-2, barHeight);\n\n          x += barWidth;\n\n      }\n      \n    } else {\n      return;\n    }\n  }\n\n  clearFrame(){\n    var self = this\n    self.canvasContext.clearRect(0, 0, self.WIDTH, self.HEIGHT);\n    self.canvasContext.fillStyle = \"#333\";\n    self.canvasContext.fillRect(0, 0, self.WIDTH, self.HEIGHT);    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/visualise.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Korero\"},[_c('div',{staticClass:\"header\"},[_c('h4',[_vm._v(\"Kōrero Māori Word Count (Demo))\")]),_vm._v(\" \"),_c('button',{class:{ vad: _vm.vadOn, on: _vm.recordingOn, 'loading': _vm.loadRecording},attrs:{\"id\":\"startVAD\"}},[_c('i',{staticClass:\"fa fa-microphone\"}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-stop\"}),_vm._v(\" \"),_c('i',{staticClass:\"fa fa-spinner fa-spin\"})]),_vm._v(\" \"),_c('div',{class:{ active: _vm.vadOn, 'mobile': _vm.isMobile()},attrs:{\"id\":\"vadStatus\"}},[_c('div',[(!_vm.isMobile())?_c('canvas',{attrs:{\"id\":\"canvas\"}}):_vm._e(),_vm._v(\" \"),(_vm.isMobile() && _vm.vadOn && _vm.recordingOn)?_c('span',[_vm._v(\"Voice Detected\")]):_vm._e(),_vm._v(\" \"),(_vm.isMobile() && _vm.recordingOn && !_vm.vadOn)?_c('span',[_vm._v(\"Listening\")]):_vm._e(),_vm._v(\" \"),(_vm.isMobile())?_c('span',[_vm._v(\"Hit Record\")]):_vm._e()])]),_vm._v(\" \"),_c('div',{staticClass:\"sensitivity_box\",attrs:{\"id\":\"te_reo_sensivity\"}},[_vm._v(\"\\n        Sensitivity:\\n        \"),_c('input',{attrs:{\"type\":\"range\",\"min\":\"0\",\"max\":_vm.sensitivity_max},domProps:{\"value\":_vm.te_reo_sensivity},on:{\"input\":function($event){return _vm.setTeReoSensivity($event)}}}),_vm._v(\"\\n          \"+_vm._s(_vm.te_reo_sensivity)+\"\\n      \")])]),_vm._v(\" \"),_c('div',{staticClass:\"body\"},[_c('div',{attrs:{\"id\":\"transcriptions\"}},_vm._l((_vm.transcriptions),function(item,index){return (item.status != 'Failed')?_c('div',{staticClass:\"transcription\",class:[item.status]},[(item.status != 'Transcribing')?_c('button',{staticClass:\"delete\",on:{\"click\":function($event){return _vm.deleteObject(index)}}},[_c('i',{staticClass:\"fa fa-times\"})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"text\"},[(item.status == 'Transcribing')?_c('i',{staticClass:\"fa fa-spinner fa-spin\",class:[item.status]}):_vm._e(),_vm._v(\" \"),(item.status != 'Transcribing')?_c('div',[_vm._v(_vm._s(item.display_count))]):_vm._e()])]):_vm._e()}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"status\"},[_vm._v(\" \"+_vm._s(_vm.status))])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5b66ebaa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Korero.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5b66ebaa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Korero.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Korero.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Korero.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5b66ebaa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Korero.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5b66ebaa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Korero.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Korero from '@/components/Korero'\nimport vueCustomElement from 'vue-custom-element'\nVue.use(vueCustomElement)\nVue.customElement('vue-widget', Korero)\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}